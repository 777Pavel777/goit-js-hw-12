{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/error.svg","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImg(page, query, limit) {\n  const { key, baseUrl, typeImg, orientationImg, resultSearch } = {\n    key: '42662363-4df458c081fe5322c3af06117',\n    baseUrl: 'https://pixabay.com/api/',\n    typeImg: 'photo',\n    orientationImg: 'horizontal',\n    resultSearch: true,\n  };\n\n  const searchLink = `${baseUrl}?key=${key}&q=${query}&image_type=${typeImg}&orientation=${orientationImg}&safesearch=${resultSearch}`;\n\n  const { data } = await axios.get(searchLink, {\n    params: {\n      key: key,\n      page: page,\n      per_page: limit,\n      q: query,\n    },\n  });\n  return data;\n}\n// return axios.get(searchLink).then(res => {\n//   if (res.status !== 200) {\n//     throw new Error(`Problem ${res.status}`);\n//   }\n//   return res.data;\n// });\n\n// return fetch(searchLink).then(res => {\n//   if (!res.ok) {\n//     throw new Error(`Problem ${res.status}`);\n//   }\n//   return res.json();\n// });\n","export function createMarkup(images, domElem) {\n  const markupImg = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"image-search\">\n        <a href=\"${largeImageURL}\">\n        <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n        </a>\n        <ul class=\"img-info\">\n          <li class=\"img-items\">\n            <p class=\"img-value\"><span class=\"img-subtitle\">Likes</span>${likes}</p>\n            <p class=\"img-value\"><span class=\"img-subtitle\">Views</span>${views}</p>\n            <p class=\"img-value\"><span class=\"img-subtitle\">Comments</span>${comments}</p>\n            <p class=\"img-value\"><span class=\"img-subtitle\">Downloads</span>${downloads}</p>\n          </li>\n        </ul>\n      </li>`;\n      }\n    )\n    .join('');\n  domElem.insertAdjacentHTML('beforeend', markupImg);\n}\n","export default \"__VITE_ASSET__8479b7dd__\"","import { getImg } from './js/pixabay-api';\nimport { createMarkup } from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport errorIcon from './img/error.svg';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryListElem = document.querySelector('.gallery-list');\nconst inputElem = document.querySelector('input');\nconst formSearchImg = document.querySelector('form');\nconst loaderElem = document.querySelector('.form-container div');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loadingAfterImgEl = document.querySelector('.loading');\n\nconst limit = 15;\nlet loadPageImg = 1;\nlet curentSearch;\n\nconst lightbox = new SimpleLightbox('.gallery-list a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction showError(message, colorBg, icon) {\n  iziToast.show({\n    iconUrl: icon,\n    messageColor: '#ffffff',\n    message: message,\n    backgroundColor: colorBg,\n    position: 'topRight',\n    messageSize: 16,\n    layout: 2,\n    maxWidth: 380,\n    theme: 'dark',\n  });\n}\n\nformSearchImg.addEventListener('submit', handleSearchImg);\n\nasync function handleSearchImg(event) {\n  event.preventDefault();\n  loadPageImg = 1;\n  curentSearch = inputElem.value;\n\n  galleryListElem.innerHTML = '';\n  const query = inputElem.value.trim();\n\n  if (query === '') {\n    loadMoreBtn.classList.add('hidden');\n    showError('Sorry, input is emty. Please try again!', '#FFA000');\n    return;\n  }\n\n  try {\n    const data = await getImg(loadPageImg, curentSearch, limit);\n\n    if (data.total === 0) {\n      loadMoreBtn.classList.add('hidden');\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!',\n        '#EF4040',\n        errorIcon\n      );\n      loaderElem.classList.remove('loader');\n      return;\n    }\n\n    createMarkup(data.hits, galleryListElem);\n\n    if (Math.floor(data.totalHits / limit) === loadPageImg) {\n      loadingAfterImgEl.classList.remove('loader');\n      showErrorCustom('You have more 500 images.Please try later');\n      return;\n    }\n\n    loaderElem.classList.remove('loader');\n    loadMoreBtn.classList.remove('hidden');\n\n    if (data.totalHits < loadPageImg * limit) {\n      loadMoreBtn.classList.add('hidden');\n      return showError(\n        \"We're sorry, but you've reached the end of search results.\",\n        '#0071BD'\n      );\n    }\n\n    lightbox.refresh();\n  } catch (error) {\n    showError('Something went wrong.Please try later');\n  }\n\n  formSearchImg.reset();\n}\n\nloadMoreBtn.addEventListener('click', addMoreImg);\n\nasync function addMoreImg() {\n  loadPageImg += 1;\n  loadingAfterImgEl.classList.add('loader');\n\n  try {\n    const data = await getImg(loadPageImg, curentSearch, limit);\n\n    createMarkup(data.hits, galleryListElem);\n\n    if (Math.floor(data.totalHits / limit) === loadPageImg) {\n      loadingAfterImgEl.classList.remove('loader');\n      return;\n    }\n\n    loaderElem.classList.remove('loader');\n    loadingAfterImgEl.classList.remove('loader');\n    loadMoreBtn.classList.remove('hidden');\n\n    if (data.hits.length >= data.totalHits) {\n      loadMoreBtn.classList.add('hidden');\n      return showError(\n        \"We're sorry, but you've reached the end of search results.\",\n        '#0071BD'\n      );\n    }\n\n    window.scrollBy({\n      top: 580,\n      behavior: 'smooth',\n    });\n\n    lightbox.refresh();\n  } catch {\n    loadingAfterImgEl.classList.remove('loader');\n    loadMoreBtn.classList.add('hidden');\n    showError('Something went wrong.Please try later');\n  }\n}\n"],"names":["getImg","page","query","limit","key","baseUrl","typeImg","orientationImg","resultSearch","searchLink","data","axios","createMarkup","images","domElem","markupImg","webformatURL","largeImageURL","tags","likes","views","comments","downloads","errorIcon","galleryListElem","inputElem","formSearchImg","loaderElem","loadMoreBtn","loadingAfterImgEl","loadPageImg","curentSearch","lightbox","SimpleLightbox","showError","message","colorBg","icon","iziToast","handleSearchImg","event","addMoreImg"],"mappings":"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"}